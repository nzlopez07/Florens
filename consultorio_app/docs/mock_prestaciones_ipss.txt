================================================================================
MOCK VISUAL - ESTRUCTURA DE PRESTACIONES IPSS CON ESTADOS
================================================================================
Fecha: 21/01/2026
PropÃ³sito: DiseÃ±o de modelo de datos para prestaciones IPSS con autorizaciÃ³n,
           realizaciÃ³n en dos momentos, baja lÃ³gica y mÃºltiples cobros
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. TABLA: Prestacion (cabecera)                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Campo                            Tipo        Nullable  Default      DescripciÃ³n
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
id                               Integer     NO        AUTO         PK
paciente_id                      Integer     NO        -            FK -> Paciente
descripcion                      String      NO        -            Ej: "Consulta + Limpieza IPSS"
monto                            Float       NO        0.0          Monto total calculado (legacy, mantener para compatibilidad)
fecha                            DateTime    NO        NOW()        Fecha de creaciÃ³n/solicitud
observaciones                    String      YES       NULL         Observaciones generales

--- NUEVOS CAMPOS IPSS ---
estado                           String(20)  NO        'borrador'   Enum: borrador | autorizada | realizada | liquidada
fecha_solicitud                  Date        NO        TODAY        DÃ­a que se crea (normalmente el dÃ­a de consulta)
fecha_autorizacion               Date        YES       NULL         CuÃ¡ndo llegÃ³ la ficha autorizada de OS
fecha_realizacion                Date        YES       NULL         CuÃ¡ndo se atendiÃ³ efectivamente al paciente
importe_afiliado_autorizado      Float       YES       NULL         Lo que debe pagar el paciente (segÃºn OS)
importe_coseguro_autorizado      Float       YES       NULL         Coseguro si aplica
importe_profesional_autorizado   Float       YES       NULL         Honorarios brutos autorizados por OS (sin descontar plus afiliado)
autorizacion_adjunta_path        String      YES       NULL         Ruta al archivo (foto/PDF de ficha autorizada)
observaciones_autorizacion       String      YES       NULL         Notas sobre la autorizaciÃ³n


CONSTRAINTS:
- fecha_realizacion >= fecha_autorizacion (si ambas existen)
- No permitir estado 'realizada' sin fecha_autorizacion
- No permitir estado 'liquidada' sin fecha_realizacion


INDICES SUGERIDOS:
- idx_prestacion_paciente (paciente_id)
- idx_prestacion_estado (estado)
- idx_prestacion_fecha_realizacion (fecha_realizacion) -- para regla 12 meses IPSS


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. TABLA: PrestacionPractica (detalle de Ã­tems)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Campo                   Tipo        Nullable  Default      DescripciÃ³n
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
id                      Integer     NO        AUTO         PK
prestacion_id           Integer     NO        -            FK -> Prestacion
practica_id             Integer     NO        -            FK -> Practica
cantidad                Integer     NO        1            NUEVO USO: permite "2 extracciones", "3 restauraciones", etc.
monto_unitario          Float       YES       NULL         Copia de practica.monto_unitario al momento de creaciÃ³n
observaciones           String      YES       NULL         Observaciones del Ã­tem

--- NUEVOS CAMPOS IPSS ---
tipo_concepto           String(20)  NO        'acto'       Enum: acto | plus_doctora | plus_afiliado | honorario_os
estado_item             String(20)  NO        'pendiente'  Enum: pendiente | autorizado | realizado | anulado
monto_autorizado        Float       YES       NULL         Monto autorizado por OS para este Ã­tem
monto_cobrado           Float       YES       NULL         Monto efectivamente cobrado (legacy, se mueve a PrestacionCobro)
fecha_realizacion_item  Date        YES       NULL         CuÃ¡ndo se realizÃ³ este Ã­tem especÃ­fico
fecha_anulacion         Date        YES       NULL         CuÃ¡ndo se anulÃ³ (si aplica)
razon_anulacion         String      YES       NULL         Por quÃ© se anulÃ³


CONSTRAINTS:
- cantidad >= 1
- Si estado_item = 'anulado', debe tener fecha_anulacion


INDICES SUGERIDOS:
- idx_pp_prestacion (prestacion_id)
- idx_pp_practica (practica_id)
- idx_pp_estado_item (estado_item)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. TABLA: PrestacionCobro (nueva - historial de cobros)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Campo              Tipo        Nullable  Default      DescripciÃ³n
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
id                 Integer     NO        AUTO         PK
prestacion_id      Integer     NO        -            FK -> Prestacion
fecha_cobro        Date        NO        TODAY        CuÃ¡ndo se registrÃ³ el cobro
tipo_cobro         String(30)  NO        -            Enum: plus_consulta | plus_practica | plus_afiliado | honorario_os | otro
monto              Float       NO        0.0          Monto cobrado
razon              String      YES       NULL         DescripciÃ³n opcional (ej: "Plus consulta dÃ­a 1", "Plus extracciÃ³n dÃ­a 15")
usuario_id         Integer     YES       NULL         FK -> Usuario (quiÃ©n registrÃ³)
created_at         DateTime    NO        NOW()        Timestamp de creaciÃ³n


CONSTRAINTS:
- monto >= 0


INDICES SUGERIDOS:
- idx_cobro_prestacion (prestacion_id)
- idx_cobro_fecha (fecha_cobro)
- idx_cobro_tipo (tipo_cobro)


QUERIES TÃPICAS:
- Total plus doctora de una prestaciÃ³n:
  SELECT SUM(monto) FROM PrestacionCobro 
  WHERE prestacion_id = X AND tipo_cobro IN ('plus_consulta', 'plus_practica')

- Total plus afiliado cobrado en un periodo:
  SELECT SUM(monto) FROM PrestacionCobro 
  WHERE tipo_cobro = 'plus_afiliado' AND fecha_cobro BETWEEN fecha1 AND fecha2


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. TABLA: PrestacionAudit (opcional - auditorÃ­a de cambios)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Campo              Tipo        Nullable  Default      DescripciÃ³n
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
id                 Integer     NO        AUTO         PK
prestacion_id      Integer     NO        -            FK -> Prestacion
campo              String(50)  NO        -            Nombre del campo modificado
valor_anterior     String      YES       NULL         Valor antes del cambio (serializado como texto)
valor_nuevo        String      YES       NULL         Valor despuÃ©s del cambio
fecha_cambio       DateTime    NO        NOW()        Timestamp del cambio
razon              String      YES       NULL         JustificaciÃ³n del cambio
usuario_id         Integer     YES       NULL         FK -> Usuario (quiÃ©n hizo el cambio)


CASOS DE USO:
- Registrar cuando se ajusta "importe_afiliado_autorizado" post-autorizaciÃ³n
- Registrar anulaciÃ³n de Ã­tems
- Tracking de cambios en estados


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. TABLA: Practica (modificada - baja lÃ³gica)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Campo               Tipo        Nullable  Default      DescripciÃ³n
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
id                  Integer     NO        AUTO         PK
codigo              String(30)  NO        -            CÃ³digo de nomenclador (ej: "01.03", "05.02")
descripcion         String(200) NO        -            DescripciÃ³n de la prÃ¡ctica
proveedor_tipo      String(20)  NO        -            PARTICULAR | OBRA_SOCIAL
obra_social_id      Integer     YES       NULL         FK -> ObraSocial (solo si proveedor_tipo = OBRA_SOCIAL)
monto_unitario      Float       NO        0.0          Precio base

--- NUEVOS CAMPOS BAJA LÃ“GICA ---
activa              Boolean     NO        TRUE         FALSE = prÃ¡ctica dada de baja (no se puede usar en nuevas prestaciones)
fecha_baja          Date        YES       NULL         CuÃ¡ndo se dio de baja
razon_baja          String      YES       NULL         Por quÃ© se dio de baja


CONSTRAINTS:
- Si activa = FALSE, debe tener fecha_baja


INDICES SUGERIDOS:
- idx_practica_activa (activa)
- idx_practica_codigo_os (codigo, obra_social_id) -- para bÃºsquedas rÃ¡pidas


QUERIES:
- Listar prÃ¡cticas disponibles para nueva prestaciÃ³n:
  SELECT * FROM Practica WHERE activa = TRUE

- Mostrar todas (incluyendo inactivas) para auditorÃ­a:
  SELECT * FROM Practica


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

EJEMPLO CONCRETO: PrestaciÃ³n IPSS con 2 Extracciones + Consulta + Limpieza
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

--- PACIENTE ---
Nombre: Janet Judith Guaimas
DNI: 12345678
Obra Social: IPSS (id=1)


--- PRÃCTICA EN CATÃLOGO ---
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ codigo â”‚ descripcion         â”‚ monto_unit.  â”‚ activa  â”‚ OS     â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 10 â”‚ 01.03  â”‚ Consulta            â”‚   5000.00    â”‚ TRUE    â”‚ IPSS   â”‚
â”‚ 11 â”‚ 05.02  â”‚ Limpieza            â”‚  10000.00    â”‚ TRUE    â”‚ IPSS   â”‚
â”‚ 12 â”‚ 02.10  â”‚ ExtracciÃ³n simple   â”‚  15000.00    â”‚ TRUE    â”‚ IPSS   â”‚
â”‚ 13 â”‚ PLUS01 â”‚ Plus Consulta Dr.   â”‚  25000.00    â”‚ TRUE    â”‚ IPSS   â”‚
â”‚ 14 â”‚ PLUS02 â”‚ Plus ExtracciÃ³n Dr. â”‚  20000.00    â”‚ TRUE    â”‚ IPSS   â”‚
â”‚ 15 â”‚ PLUS03 â”‚ Plus Limpieza Dr.   â”‚  10000.00    â”‚ TRUE    â”‚ IPSS   â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
TIMELINE DE LA PRESTACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“… 21/01/2026 (DÃA 1 - CONSULTA)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Paciente llega a consultorio
2. Doctora hace consulta, detecta necesidad de 2 extracciones + limpieza
3. Cobra SOLO el plus de la consulta ($25,000)
4. Crea prestaciÃ³n en el sistema:


--- TABLA: Prestacion ---
id: 100
paciente_id: 5 (Janet Judith Guaimas)
descripcion: "Consulta + 2 Extracciones + Limpieza IPSS"
monto: 95000.00  (cÃ¡lculo: 5000+2*15000+10000+25000+2*20000+10000 = subtotal prÃ¡cticas)
fecha: 2026-01-21 14:30:00
estado: 'borrador'
fecha_solicitud: 2026-01-21
fecha_autorizacion: NULL
fecha_realizacion: NULL
importe_afiliado_autorizado: NULL
importe_coseguro_autorizado: NULL
importe_profesional_autorizado: NULL


--- TABLA: PrestacionPractica ---
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ prestacion_idâ”‚ practica â”‚ cantidad â”‚ tipo_conc. â”‚ estado_item   â”‚ monto_autor. â”‚ monto_cobr.  â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1  â”‚ 100          â”‚ 10       â”‚ 1        â”‚ acto       â”‚ pendiente     â”‚ NULL         â”‚ NULL         â”‚  <-- Consulta (01.03)
â”‚ 2  â”‚ 100          â”‚ 11       â”‚ 1        â”‚ acto       â”‚ pendiente     â”‚ NULL         â”‚ NULL         â”‚  <-- Limpieza (05.02)
â”‚ 3  â”‚ 100          â”‚ 12       â”‚ 2        â”‚ acto       â”‚ pendiente     â”‚ NULL         â”‚ NULL         â”‚  <-- 2 Extracciones (02.10) âœ¨
â”‚ 4  â”‚ 100          â”‚ 13       â”‚ 1        â”‚ plus_doc.  â”‚ pendiente     â”‚ NULL         â”‚ NULL         â”‚  <-- Plus consulta
â”‚ 5  â”‚ 100          â”‚ 14       â”‚ 2        â”‚ plus_doc.  â”‚ pendiente     â”‚ NULL         â”‚ NULL         â”‚  <-- Plus 2 extracciones
â”‚ 6  â”‚ 100          â”‚ 15       â”‚ 1        â”‚ plus_doc.  â”‚ pendiente     â”‚ NULL         â”‚ NULL         â”‚  <-- Plus limpieza
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


--- TABLA: PrestacionCobro ---
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ prestacion_idâ”‚ fecha_cobro  â”‚ tipo_cobro      â”‚ monto    â”‚ razon                        â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1  â”‚ 100          â”‚ 2026-01-21   â”‚ plus_consulta   â”‚ 25000.00 â”‚ "Cobro del dÃ­a de consulta"  â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


5. Doctora envÃ­a ficha (por otro sistema) a IPSS para autorizaciÃ³n


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“… 22/01/2026 (DÃA 2 - LLEGA AUTORIZACIÃ“N)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. IPSS envÃ­a foto de ficha con desglose:
   - Importe Profesional: $40,000 (honorarios brutos de la OS)
   - Importe Afiliado: $13,071.28 (lo que debe pagar el paciente adicionalmente)
   - Importe Coseguro: $0 (no aplica en este caso)

2. Doctora registra la autorizaciÃ³n en el sistema:


--- TABLA: Prestacion (ACTUALIZADA) ---
id: 100
estado: 'autorizada'  â¬…ï¸ CAMBIO
fecha_autorizacion: 2026-01-22  â¬…ï¸ NUEVO
importe_afiliado_autorizado: 13071.28  â¬…ï¸ NUEVO
importe_coseguro_autorizado: 0.00  â¬…ï¸ NUEVO
importe_profesional_autorizado: 40000.00  â¬…ï¸ NUEVO
autorizacion_adjunta_path: '/uploads/prestaciones/100_autorizacion.jpg'  â¬…ï¸ NUEVO
observaciones_autorizacion: 'Autorizado OK por IPSS'


--- TABLA: PrestacionPractica (ACTUALIZADA) ---
Todos los Ã­tems cambian estado_item de 'pendiente' a 'autorizado'


--- TABLA: PrestacionAudit (registro del cambio) ---
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ prestacion_idâ”‚ campo                      â”‚ valor_ant.   â”‚ valor_nuevo  â”‚ fecha_cambio      â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1  â”‚ 100          â”‚ estado                     â”‚ 'borrador'   â”‚ 'autorizada' â”‚ 2026-01-22 09:15  â”‚
â”‚ 2  â”‚ 100          â”‚ importe_profesional_autor. â”‚ NULL         â”‚ '40000.00'   â”‚ 2026-01-22 09:15  â”‚
â”‚ 3  â”‚ 100          â”‚ importe_afiliado_autor.    â”‚ NULL         â”‚ '13071.28'   â”‚ 2026-01-22 09:15  â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“… 05/02/2026 (DÃA 15 - REALIZACIÃ“N DE PRÃCTICAS)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Paciente vuelve para las 2 extracciones y limpieza
2. Doctora realiza las prÃ¡cticas
3. Cobra:
   - Plus de 2 extracciones: $40,000 (2 Ã— $20,000)
   - Plus de limpieza: $10,000
   - Plus afiliado: $13,071.28 (el paciente paga esta diferencia)

4. Registra la realizaciÃ³n:


--- TABLA: Prestacion (ACTUALIZADA) ---
id: 100
estado: 'realizada'  â¬…ï¸ CAMBIO
fecha_realizacion: 2026-02-05  â¬…ï¸ NUEVO


--- TABLA: PrestacionPractica (ACTUALIZADA) ---
Todos los Ã­tems de tipo 'acto' cambian estado_item a 'realizado' y se marca fecha_realizacion_item


--- TABLA: PrestacionCobro (ACTUALIZADA) ---
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ prestacion_idâ”‚ fecha_cobro  â”‚ tipo_cobro      â”‚ monto    â”‚ razon                            â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1  â”‚ 100          â”‚ 2026-01-21   â”‚ plus_consulta   â”‚ 25000.00 â”‚ "Cobro del dÃ­a de consulta"      â”‚
â”‚ 2  â”‚ 100          â”‚ 2026-02-05   â”‚ plus_practica   â”‚ 40000.00 â”‚ "Plus 2 extracciones"            â”‚  â¬…ï¸ NUEVO
â”‚ 3  â”‚ 100          â”‚ 2026-02-05   â”‚ plus_practica   â”‚ 10000.00 â”‚ "Plus limpieza"                  â”‚  â¬…ï¸ NUEVO
â”‚ 4  â”‚ 100          â”‚ 2026-02-05   â”‚ plus_afiliado   â”‚ 13071.28 â”‚ "Importe afiliado cobrado"       â”‚  â¬…ï¸ NUEVO
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“… 28/02/2026 (FIN DE MES - LIQUIDACIÃ“N)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

CÃ¡lculo del sueldo de la doctora para prestaciÃ³n 100:

Honorarios OS autorizados:        $40,000.00
MENOS: Plus afiliado cobrado:     -$13,071.28  â¬…ï¸ Se descuenta
MÃS: Plus doctora cobrados:       +$75,000.00  (25k consulta + 40k extracciones + 10k limpieza)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TOTAL A PAGAR A DOCTORA:          $101,928.72


--- TABLA: Prestacion (ACTUALIZADA) ---
id: 100
estado: 'liquidada'  â¬…ï¸ CAMBIO FINAL


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CASO DE USO: ANULACIÃ“N DE ÃTEM (doctora decide no hacer 1 extracciÃ³n)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“… 03/02/2026 (antes de la realizaciÃ³n)

Doctora decide que solo harÃ¡ 1 extracciÃ³n en vez de 2.

OpciÃ³n 1: EDITAR cantidad en PrestacionPractica
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Si la prestaciÃ³n aÃºn estÃ¡ en 'autorizada' y no 'realizada':
- Permitir cambiar cantidad de 2 a 1 en Ã­tem id=3 (extracciones)
- Registrar cambio en PrestacionAudit


OpciÃ³n 2: ANULAR uno de los Ã­tems (mÃ¡s robusto para auditorÃ­a)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Crear NUEVO Ã­tem para la extracciÃ³n que se anula:

--- TABLA: PrestacionPractica (con anulaciÃ³n) ---
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ prestacion_idâ”‚ practica â”‚ cantidad â”‚ tipo_conc. â”‚ estado_item   â”‚ monto_autor. â”‚ fecha_anulacion  â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3  â”‚ 100          â”‚ 12       â”‚ 1        â”‚ acto       â”‚ realizado     â”‚ 15000.00     â”‚ NULL             â”‚  <-- Solo 1 extracciÃ³n
â”‚ 7  â”‚ 100          â”‚ 12       â”‚ 1        â”‚ acto       â”‚ anulado       â”‚ 15000.00     â”‚ 2026-02-03       â”‚  â¬…ï¸ ExtracciÃ³n anulada
â”‚ 5  â”‚ 100          â”‚ 14       â”‚ 1        â”‚ plus_doc.  â”‚ realizado     â”‚ 20000.00     â”‚ NULL             â”‚  <-- Plus solo 1 extracciÃ³n
â”‚ 8  â”‚ 100          â”‚ 14       â”‚ 1        â”‚ plus_doc.  â”‚ anulado       â”‚ 20000.00     â”‚ 2026-02-03       â”‚  â¬…ï¸ Plus anulado
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

VALIDACIÃ“N REGLA 12 MESES IPSS (consulta 01.03 y limpieza 05.02)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Query para validar ANTES de crear nueva prestaciÃ³n con cÃ³digo 01.03 o 05.02:

SELECT MAX(pp.fecha_realizacion_item) as ultima_realizacion
FROM PrestacionPractica pp
JOIN Practica p ON pp.practica_id = p.id
JOIN Prestacion pre ON pp.prestacion_id = pre.id
WHERE pre.paciente_id = <paciente_id>
  AND p.codigo IN ('01.03', '05.02')  -- Consulta o Limpieza
  AND pp.estado_item = 'realizado'
  AND p.obra_social_id = <obra_social_ipss_id>

Si ultima_realizacion > (FECHA_ACTUAL - 12 meses):
  âŒ RECHAZAR creaciÃ³n de nueva prestaciÃ³n con ese cÃ³digo
  Mensaje: "El cÃ³digo 01.03 (Consulta) solo puede realizarse cada 12 meses en IPSS.
            Ãšltima realizaciÃ³n: 21/03/2025. PrÃ³xima permitida: 21/03/2026"


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

RESUMEN DE VENTAJAS DEL DISEÃ‘O
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… Permite mÃºltiples cantidades de la misma prÃ¡ctica (2 extracciones, 3 restauraciones)
âœ… Baja lÃ³gica de prÃ¡cticas (activa=False) mantiene integridad de prestaciones antiguas
âœ… Estados de prestaciÃ³n bloquean ediciones destructivas post-autorizaciÃ³n
âœ… Ãtems nunca se borran, solo se anulan (auditorÃ­a completa)
âœ… Cobros en tabla separada permiten mÃºltiples registros a lo largo del tiempo
âœ… Tracking de fechas (solicitud, autorizaciÃ³n, realizaciÃ³n) para reportes
âœ… ValidaciÃ³n de regla IPSS 12 meses con query simple
âœ… PrestacionAudit opcional para tracking de cambios post-autorizaciÃ³n
âœ… Compatibilidad con informes existentes (campo monto en cabecera se mantiene)
âœ… Adjuntos de autorizaciones (fotos de fichas aprobadas)
âœ… CÃ¡lculo exacto de sueldo doctora: honorarios OS - plus afiliado + plus doctora

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FIN DEL MOCK
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
